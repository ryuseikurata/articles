---
title: "RxJS mapã¨mergeMapã®é•ã„"
emoji: "ğŸ“‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["rxjs"]
published: true
---

# å‰æ

rxjs ã«ã¤ã„ã¦ã€ã¾ã ä½•ã‚‚ã‚ã‹ã‚‰ãªã„æ–¹ã¯ã€ã“ã¡ã‚‰ã®è¨˜äº‹ã‚’ä¸€åº¦èª­ã‚“ã§ã„ãŸã ã‘ãŸã‚‰ã¨æ€ã„ã¾ã™ã€‚
https://tech.recruit-mp.co.jp/front-end/rxjs-intro/
ã¨åŒæ™‚ã«ã“ã®è¨˜äº‹ã§ã¯ã€

- ã‚¹ãƒˆãƒªãƒ¼ãƒ 
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- pipe
- subscribe

ã«ã¤ã„ã¦å°‘ã—è§£èª¬ã—ã¾ã™ã€‚
ç‰¹ã«ã‚¹ãƒˆãƒªãƒ¼ãƒ ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€map ã¨ mergeMap ã®èª¬æ˜ã§ã‚ˆãä½¿ã„ã¾ã™ã€‚

## ã‚¹ãƒˆãƒªãƒ¼ãƒ 

observable ã®ã“ã¨ã‚’æŒ‡ã—ã¾ã™ã€‚
`const source = of(1,2)`
ä¸Šè¨˜ã¯ã€of ã«ã‚ˆã£ã¦ã€å¤‰æ•°ãŒ source ãŒ observable ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€å¤‰æ•° source ã¯ã‚¹ãƒˆãƒªãƒ¼ãƒ ã¨ã„ãˆã¾ã™ã€‚

## ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ä¸­ã«å­˜åœ¨ã™ã‚‹å€¤ã‚’æŒ‡ã—ã¾ã™ã€‚
`const source = of(1,2)`
of ã®å¼•æ•°ã«ã€1 ã¨ 2 ã‚’å…¥ã‚Œã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§ã‚ã‚‹ source ã¯ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ 1 ã¨ 2 ã‚’ã‚‚ã¤ã¨ã„ãˆã¾ã™ã€‚

## pipe ã«ã¤ã„ã¦

**ã‚ªãƒšãƒ¬ãƒ¼ã‚¿**ã‚’å‘¼ã³å‡ºã™ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚
ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã¯ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’æ“ä½œã—ã¾ã™ã€‚
ä»Šå›ã®ä¸»é¡Œã§ã‚ã‚‹ã€map,mergeMap ã‚‚ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã®åŒºåˆ†ã«è©²å½“ã—ã¾ã™ã€‚

```typescript
//ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä½œã‚‹
const number = of(1,2)
//numberã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã€ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚
const map = number.pipe(
    map((x) => x ** 2))
//subscribeã§å€¤ã‚’è³¼èª­
map.subscribe( val => console.log(val);
```

```typescript
1;
4;
```

##çµå±€ pipe ã¨ subscribe ã®é•ã„ã¯ï¼Ÿ

- pipe ãŒã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã‚’å‘¼ã³å‡ºã™ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰
- subscribe ãŒã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è³¼èª­ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚

# Map

ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã—ã¦ã€æ–°ãŸãªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä½œæˆã—ã¾ã™ã€‚

```typescript
//ã‚¹ãƒˆãƒªãƒ¼ãƒ ä½œæˆ
const source = of(1, 2);
//å„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«10ã‚’è¶³ã—ã¾ã™ã€‚
const example = source.pipe(map((val) => val + 10));

const subscribe = example.subscribe((val) => console.log(val));
```

```typescript
11;
12;
```

# MergeMap

è¤‡æ•°ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä¸€ã¤ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«ã¾ã¨ã‚ã¾ã™ã€‚

```typescript
// ã‚¹ãƒˆãƒªãƒ¼ãƒ ä½œæˆ
const numbers = of(1, 2, 3);

//mergeMapã®å¼•æ•°ã®ä¸­ã§ã¯ã€numbersã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã”ã¨ã«ã€æ–°ãŸãªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚
//ã¤ã¾ã‚Šã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ä¸­ã§ã€è¤‡æ•°ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒã§ãã¦ã„ã¾ã™ã€‚
//mergeMapã«ã‚ˆã£ã¦ã€ãã‚Œã‚’ä¸€ã¤ã«ã¾ã¨ã‚ã¾ã™ã€‚
const result = numbers.pipe(mergeMap((x) => of(x)));

result.subscribe((x) => console.log(x));
```

```typescript
1;
2;
3;
```

# ã¾ã¨ã‚

- map ã¯ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã—ã¦ã€æ–°ãŸãªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä½œæˆã—ã¾ã™ã€‚
- mergeMap ã¯è¤‡æ•°ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä¸€ã¤ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«ã¾ã¨ã‚ã¾ã™ã€‚

# å¼•ç”¨

http://reactivex.io/documentation/observable.html
https://t-cr.jp/article/3551640ea6a96e173
http://wilfrem.github.io/learn_rx/operators.html
http://reactivex.io/rxjs/file/es6/operator/mergeMap.js.html
